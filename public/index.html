<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>AstroEra ‚Äì AI Powered Vedic Astrology | by Vedang Soni</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<meta name="google-site-verification" content="vMQeKXKG1Tik-KT3r47NCOf6LVaDQ8K9FpktamJr3T0" />
<!-- Google tag (gtag.js) --><!--Analytics-->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EYKZW2JHVR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-EYKZW2JHVR');
</script>

<!-- ===========================
     SEO
=========================== -->
<meta name="description" content="AstroEra ‚Äì Get AI-powered Vedic Astrology insights. Generate your Kundli-based personality report in English or Hindi instantly. Talk to astrologers directly.">
<meta name="keywords" content="AstroEra, kundli, astrology, vedic astrology, horoscope, rashifal, janam kundli, AI kundli, birth chart, astrology report, hindi astrology">
<meta property="og:title" content="AstroEra ‚Äì AI Powered Vedic Astrology" />
<meta property="og:description" content="Generate AI-powered English & Hindi Kundli reports instantly. Talk to astrologers directly on WhatsApp." />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="theme-color" content="#4f46e5" />

<style>
/* ================= ROOT ================= */
:root {
  --bg: #020617;
  --fg: #ffffff;
  --glass: rgba(255,255,255,0.08);
  --card: rgba(255,255,255,0.12);
  --border: rgba(255,255,255,0.16);
  --primary: #6366f1;
  --grad1: #4f46e5;
  --grad2: #ec4899;
  --radius: 18px;
  --blur: 18px;
}

body.light {
  --bg: #e2e8f0;
  --fg: #111827;
  --glass: rgba(255,255,255,0.85);
  --card: rgba(255,255,255,0.95);
  --border: rgba(0,0,0,0.18);
}

/* ================= GLOBAL ================= */
* {
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:"Inter",sans-serif;
}

body {
  background:var(--bg);
  color:var(--fg);
  min-height:100vh;
  padding:20px;
  display:flex;
  justify-content:center;
  transition:.3s;
  overflow-x:hidden;
}

/* ================= INTRO (Tap to Enter) ================= */
#intro-screen{
  position:fixed;
  inset:0;
  background:radial-gradient(circle,#0a0f2a,#000);
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
  z-index:9999;
}
.intro-aura{
  position:absolute;
  width:320px;height:320px;
  background:radial-gradient(circle,rgba(120,120,255,0.45),transparent 70%);
  filter:blur(65px);
  animation:auraMove 9s ease-in-out infinite;
}
.aura2{
  width:380px;height:380px;
  background:radial-gradient(circle,rgba(255,80,180,0.45),transparent 70%);
  animation-duration:12s;
}
@keyframes auraMove{
  0%{transform:translate(-90px,-90px);}
  50%{transform:translate(130px,100px);}
  100%{transform:translate(-90px,-90px);}
}
.intro-center{text-align:center;z-index:10;}
.intro-om{
  font-size:85px;
  font-weight:900;
  color:#fbbf24;
  text-shadow:0 0 30px #fbbf24cc;
  animation:omGlow 2s ease-in-out infinite;
  cursor:pointer;
}
@keyframes omGlow{
  0%{transform:scale(1);opacity:.85;}
  50%{transform:scale(1.15);opacity:1;}
  100%{transform:scale(1);opacity:.85;}
}
.tap-text{
  margin-top:12px;
  font-size:18px;
  color:#ffffffaa;
  animation:tapPulse 2s infinite;
}
@keyframes tapPulse{
  0%{opacity:.4;}50%{opacity:1;}100%{opacity:.4;}
}
.intro-exit{
  animation:introFade .7s forwards ease-out;
}
@keyframes introFade{
  to{opacity:0;visibility:hidden;}
}

/* ================= MAIN APP ================= */
.app{
  width:100%;
  max-width:1200px;
  background:var(--glass);
  border-radius:var(--radius);
  border:1px solid var(--border);
  backdrop-filter:blur(var(--blur));
  overflow:hidden;
  box-shadow:0 20px 45px rgba(0,0,0,.45);
  opacity:0;
  transform:translateY(40px);
  transition:.6s ease-out;
}
.app.visible{
  opacity:1;
  transform:translateY(0);
}

/* ================= HEADER ================= */
header{
  background:linear-gradient(to right,var(--grad1),var(--grad2));
  padding:18px 24px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  color:#fff;
}
.brand{
  display:flex;
  align-items:center;
  gap:12px;
}
.brand-icon{
  width:42px;
  height:42px;
  border-radius:50%;
  background:#fbbf24;
  color:#000;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:900;
  font-size:22px;
}
.theme-toggle{
  font-size:26px;
  cursor:pointer;
}

/* ================= LAYOUT ================= */
main{
  display:flex;
  flex-wrap:wrap;
}
.left,.right{
  width:100%;
  padding:24px;
}
@media(min-width:850px){
  .left,.right{width:50%;}
  .left{border-right:1px solid var(--border);}
}

/* ================= FORM ================= */
form{
  display:flex;
  flex-direction:column;
  gap:16px;
}
input,textarea,select{
  width:100%;
  padding:12px;
  border-radius:var(--radius);
  border:1px solid var(--border);
  background:rgba(255,255,255,0.12);
  color:var(--fg);
  transition:.25s;
}
input:focus,textarea:focus,select:focus{
  border-color:var(--primary);
  transform:scale(1.02);
}
select{
  background:rgba(0,0,0,0.35);
}
body.light select{
  background:rgba(255,255,255,0.85);
  color:#111;
}
select option{
  background:#0f172a;
  color:white;
}
body.light select option{
  background:#fff;
  color:#111;
}
.btn-primary{
  padding:14px;
  border:none;
  border-radius:999px;
  background:linear-gradient(to right,var(--grad1),var(--grad2));
  color:#fff;
  font-weight:600;
  cursor:pointer;
}

/* ================= CITY SUGGESTIONS ================= */
#city-suggestions{
  position:absolute;
  top:100%;
  left:0;
  right:0;
  max-height:260px;
  overflow-y:auto;
  background:#111827;
  color:white;
  border-radius:var(--radius);
  border:1px solid var(--border);
  box-shadow:0 8px 20px rgba(0,0,0,0.35);
  display:none;
  z-index:1000;
}
body.light #city-suggestions{
  background:#ffffff;
  color:#111827;
  box-shadow:0 8px 20px rgba(0,0,0,0.15);
}
.city-suggestion-item{
  padding:10px 12px;
  cursor:pointer;
  font-size:14px;
  border-bottom:1px solid rgba(255,255,255,0.12);
}
body.light .city-suggestion-item{
  border-bottom:1px solid rgba(0,0,0,0.08);
}
.city-suggestion-item:hover{
  background:rgba(255,255,255,0.12);
}
body.light .city-suggestion-item:hover{
  background:rgba(0,0,0,0.06);
}

/* ================= RESULT + VOICE ================= */
.result-card{
  background:var(--card);
  border-radius:var(--radius);
  border:1px solid var(--border);
  padding:16px;
  min-height:260px;
  white-space:pre-wrap;
}

/* VOICE CONTROLS ‚Äì better styling */
.voice-controls{
  margin:12px 0 14px;
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}
.voice-btn{
  padding:6px 14px;
  border-radius:999px;
  border:1px solid var(--border);
  background:linear-gradient(to right, var(--grad1), var(--grad2));
  color:#fff;
  font-size:13px;
  display:flex;
  align-items:center;
  gap:6px;
  cursor:pointer;
  box-shadow:0 4px 12px rgba(0,0,0,0.25);
}
.voice-btn span{
  font-size:14px;
}
body.light .voice-btn{
  color:#fff;
}

/* ================= SIMPLE LOADER ================= */
.loader{
  width:44px;
  height:44px;
  border-radius:50%;
  border:4px solid rgba(255,255,255,0.18);
  border-top-color:var(--primary);
  margin:24px auto;
  animation:spin 0.7s linear infinite;
}
@keyframes spin{
  to{transform:rotate(360deg);}
}

/* ================= FLOATING BAR ================= */
.floating-bar{
  position:fixed;
  bottom:0;
  left:0;
  right:0;
  padding:10px;
  display:flex;
  justify-content:space-around;
  background:var(--glass);
  border-top:1px solid var(--border);
  backdrop-filter:blur(10px);
  z-index:500;
}
.action-btn{
  text-align:center;
  cursor:pointer;
}
.action-btn span{
  font-size:22px;
  display:block;
}

/* ================= FOOTER ================= */
footer{
  width:100%;
  text-align:center;
  font-size:12px;
  opacity:.6;
  padding:20px 16px 90px;
  border-top:1px solid var(--border);
  color:var(--fg);
}
</style>
</head>

<body>

<!-- INTRO -->
<div id="intro-screen">
  <div class="intro-aura"></div>
  <div class="intro-aura aura2"></div>
  <div class="intro-center">
    <div id="enterOm" class="intro-om">‡•ê</div>
    <div class="tap-text">Tap to Enter</div>
  </div>
</div>

<!-- APP -->
<div class="app" id="mainApp">

<header>
  <div class="brand">
    <div class="brand-icon">‡•ê</div>
    <h2>AstroEra</h2>
  </div>
  <div id="themeToggle" class="theme-toggle">üåô</div>
</header>

<main>
  <!-- LEFT -->
  <section class="left">
    <h2>Enter Birth Details</h2>
    <form id="astro-form">

      <div>
        <label>Name</label>
        <input id="name" required>
      </div>

      <div>
        <label>Gender</label>
        <select id="gender" required>
          <option value="">Select</option>
          <option>Male</option>
          <option>Female</option>
          <option>Other</option>
        </select>
      </div>

      <div>
        <label>Date of Birth</label>
        <input type="date" id="dob" required>
      </div>

      <div>
        <label>Time of Birth</label>
        <input type="time" id="tob" required>
      </div>

      <div style="position:relative;">
        <label>City</label>
        <input id="city" autocomplete="off" placeholder="Start typing city..." required>
        <div id="city-suggestions"></div>
      </div>

      <div>
        <label>State</label>
        <input id="state" required>
      </div>

      <div>
        <label>Country</label>
        <input id="country" value="India" required>
      </div>

      <div>
        <label>Specific Concern</label>
        <textarea id="notes"></textarea>
      </div>

      <button class="btn-primary">üîÆ Generate Report</button>

    </form>
  </section>

  <!-- RIGHT -->
  <section class="right">
    <div style="display:flex;justify-content:space-between;align-items:center;">
      <h2>Your Astro Report</h2>
    </div>

    <div style="margin:10px 0;">
      <select id="report-lang">
        <option value="en">English</option>
        <option value="hi">Hindi</option>
      </select>
    </div>

    <!-- VOICE CONTROLS -->
    <div class="voice-controls">
      <button type="button" class="voice-btn" id="voicePlay">
        <span>‚ñ∂</span> Play
      </button>
      <button type="button" class="voice-btn" id="voicePause">
        <span>‚è∏</span> Pause
      </button>
      <button type="button" class="voice-btn" id="voiceStop">
        <span>‚èπ</span> Stop
      </button>
    </div>

    <div id="result-card" class="result-card">
      Your report will appear here‚Ä¶
    </div>

    <a id="whatsapp-button"
       class="btn-primary"
       target="_blank"
       style="margin-top:10px;display:inline-block;">
      üí¨ Talk to Astrologer
    </a>
  </section>
</main>

<!-- FOOTER INSIDE APP -->
<footer>
  ¬© 2025 <strong>AstroEra</strong> by <strong>Vedang Soni</strong>. All Rights Reserved.
</footer>

</div> <!-- end .app -->

<!-- FLOATING BAR -->
<div class="floating-bar">
  <div class="action-btn" id="copyReport"><span>üìÑ</span>Copy</div>
  <div class="action-btn" id="shareReport"><span>üì§</span>Share</div>
  <div class="action-btn" id="downloadPDF"><span>üì•</span>PDF</div>
</div>

<script>
/* INTRO TAP */
document.getElementById("enterOm").onclick = () => {
  const intro = document.getElementById("intro-screen");
  intro.classList.add("intro-exit");
  setTimeout(() => {
    intro.remove();
    document.getElementById("mainApp").classList.add("visible");
  }, 700);
};

/* THEME */
const themeToggle = document.getElementById("themeToggle");
let theme = localStorage.getItem("theme") || "dark";
applyTheme();
function applyTheme(){
  if(theme === "light"){
    document.body.classList.add("light");
    themeToggle.textContent = "‚òÄÔ∏è";
  } else {
    document.body.classList.remove("light");
    themeToggle.textContent = "üåô";
  }
}
themeToggle.onclick = () => {
  theme = theme === "dark" ? "light" : "dark";
  localStorage.setItem("theme", theme);
  applyTheme();
};

/* CITY SEARCH (fast old system) */
let citiesFlat = [];
(async () => {
  try{
    const res = await fetch("/cities.json");
    const json = await res.json();
    for(const [state,dists] of Object.entries(json)){
      for(const [dist,places] of Object.entries(dists)){
        for(const city of Object.keys(places)){
          citiesFlat.push({city,state});
        }
      }
    }
  }catch(e){console.error("City load error",e);}
})();

function fuzzyMatch(q,t){
  q=q.toLowerCase(); t=t.toLowerCase();
  if(t.startsWith(q)) return 3;
  if(t.includes(q)) return 2;
  if(q.split("").every(c=>t.includes(c))) return 1;
  return 0;
}

const cityInput = document.getElementById("city");
const stateInput = document.getElementById("state");
const citySug = document.getElementById("city-suggestions");

cityInput.addEventListener("input", () => {
  const q = cityInput.value.trim();
  if(q.length < 2 || !citiesFlat.length){
    citySug.style.display = "none";
    return;
  }

  const results = citiesFlat
    .map(c => ({...c,score:fuzzyMatch(q,c.city)}))
    .filter(c => c.score > 0)
    .sort((a,b)=>b.score-a.score)
    .slice(0,25);

  citySug.innerHTML = "";
  if(!results.length){
    citySug.style.display="none";
    return;
  }

  results.forEach(c => {
    const div = document.createElement("div");
    div.className = "city-suggestion-item";
    div.textContent = `${c.city}, ${c.state}`;
    div.onclick = () => {
      cityInput.value = c.city;
      stateInput.value = c.state;
      citySug.style.display="none";
    };
    citySug.appendChild(div);
  });

  citySug.style.display = "block";
});

document.addEventListener("mousedown", e => {
  if(!citySug.contains(e.target) && e.target !== cityInput){
    citySug.style.display="none";
  }
});

/* ASTRO HELPERS */
function getZodiac(m,d){
  if((m===2&&d>=21)||(m===3&&d<=19))return"Aries";
  if((m===3&&d>=20)||(m===4&&d<=20))return"Taurus";
  if((m===4&&d>=21)||(m===5&&d<=20))return"Gemini";
  if((m===5&&d>=21)||(m===6&&d<=22))return"Cancer";
  if((m===6&&d>=23)||(m===7&&d<=22))return"Leo";
  if((m===7&&d>=23)||(m===8&&d<=22))return"Virgo";
  if((m===8&&d>=23)||(m===9&&d<=22))return"Libra";
  if((m===9&&d>=23)||(m===10&&d<=21))return"Scorpio";
  if((m===10&&d>=22)||(m===11&&d<=21))return"Sagittarius";
  if((m===11&&d>=22)||(m===0&&d<=19))return"Capricorn";
  if((m===0&&d>=20)||(m===1&&d<=18))return"Aquarius";
  return "Pisces";
}
function getLifePath(date){
  let s=[...(date.getFullYear()+""+(date.getMonth()+1)+date.getDate())]
    .reduce((a,b)=>a+ +b,0);
  while(s>9) s=[...(""+s)].reduce((x,y)=>x+ +y,0);
  return s;
}
function splitDescription(text){
  const enTag="[ENGLISH]", hiTag="[‡§π‡§ø‡§®‡•ç‡§¶‡•Ä]";
  const enIndex=text.indexOf(enTag);
  const hiIndex=text.indexOf(hiTag);

  if(enIndex===-1 && hiIndex===-1) return {en:text.trim(),hi:""};
  if(hiIndex===-1) return {en:text.replace(enTag,"").trim(),hi:""};
  return {
    en:text.slice(enIndex+enTag.length,hiIndex).trim(),
    hi:text.slice(hiIndex+hiTag.length).trim()
  };
}

/* FORM SUBMIT */
let descriptionFull="", descriptionEN="", descriptionHI="";
const resultCard = document.getElementById("result-card");

document.getElementById("astro-form").onsubmit = async (e) => {
  e.preventDefault();

  resultCard.innerHTML = `<div class="loader"></div>`;

  const name=document.getElementById("name").value;
  const gender=document.getElementById("gender").value;
  const dob=document.getElementById("dob").value;
  const tob=document.getElementById("tob").value;
  const city=cityInput.value;
  const state=stateInput.value;
  const country=document.getElementById("country").value;
  const notes=document.getElementById("notes").value;

  const d=new Date(dob);
  const zodiac=getZodiac(d.getMonth(),d.getDate());
  const lifePath=getLifePath(d);

  const payload={name,gender,dob,tob,city,state,country,notes,zodiac,lifePath};

  const res=await fetch("/api/astro",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify(payload)
  });
  const data=await res.json();
  const text=data.description;

  descriptionFull=text;
  const parts=splitDescription(text);
  descriptionEN=parts.en;
  descriptionHI=parts.hi;

  document.getElementById("report-lang").value="en";
  resultCard.textContent=descriptionEN || descriptionFull;

  document.getElementById("whatsapp-button").href=
    "https://wa.me/917974517991?text="+encodeURIComponent(text);
};

/* LANGUAGE SWITCH */
document.getElementById("report-lang").onchange = () => {
  const lang=document.getElementById("report-lang").value;
  if(lang==="en"){
    resultCard.textContent=descriptionEN || descriptionFull;
  } else {
    resultCard.textContent=descriptionHI || descriptionFull;
  }
};

/* VOICE READER */
let synth=window.speechSynthesis;
let currentUtter=null;

function speak(){
  if(!synth){alert("Voice not supported");return;}
  const lang=document.getElementById("report-lang").value;
  const text=lang==="en"?(descriptionEN||descriptionFull):(descriptionHI||descriptionFull);
  if(!text){alert("Generate report first.");return;}

  if(currentUtter){synth.cancel();currentUtter=null;}

  const utter=new SpeechSynthesisUtterance(text);
  utter.lang=lang==="en"?"en-IN":"hi-IN";
  const voices=synth.getVoices();
  const v=voices.find(v=>v.lang===utter.lang)||voices[0];
  if(v) utter.voice=v;
  utter.rate=0.95;
  utter.pitch=1.0;
  currentUtter=utter;
  synth.speak(utter);
}

document.getElementById("voicePlay").onclick=()=>{
  if(!synth){alert("Voice not supported");return;}
  if(synth.paused && currentUtter) synth.resume(); else speak();
};
document.getElementById("voicePause").onclick=()=>{
  if(synth && synth.speaking) synth.pause();
};
document.getElementById("voiceStop").onclick=()=>{
  if(synth){synth.cancel();currentUtter=null;}
};

/* COPY / SHARE / PDF */
document.getElementById("copyReport").onclick=()=>{
  navigator.clipboard.writeText(descriptionFull || "");
  alert("Copied!");
};
document.getElementById("shareReport").onclick=()=>{
  if(navigator.share){
    navigator.share({title:"AstroEra Report",text:descriptionFull||""});
  }else{
    navigator.clipboard.writeText(descriptionFull||"");
    alert("Copied!");
  }
};
document.getElementById("downloadPDF").onclick=()=>{
  const w=window.open("","_blank");
  w.document.write(`<pre>${(descriptionFull||"").replace(/</g,"&lt;")}</pre>`);
  w.print();
};
</script>

</body>
</html>
